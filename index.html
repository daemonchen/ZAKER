<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <title>superwolf</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="stylesheet" type="text/css" href="index.css" />
    </head>
    <body>
        <div id="status-bar">status-bar</div>
        <div id="cover">
            <h1>Zaker</h1>
            <h1 class="shadow">Zaker</h1>
        </div>
        <div id="content">

            <div class="page" id="page1">
                <div class="blog" style="width:512px;height:748px;">
                </div>
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:512px;height:408px;"></div>
            </div>
            <div class="page"  id="page2">
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:512px;height:748px;float:right;"></div>
                <div class="blog" style="width:512px;height:408px;"></div>
            </div>
            <div class="page"  id="page3">
                <div style="width:500px;float:left;">
                    <div class="blog" style="width:512px;height:340px;"></div>
                    <div class="blog" style="width:512px;height:408px;"></div>    
                </div>
                <div class="blog" style="width:512px;height:748px;"></div>
            </div>
            <div class="page"  id="page4">
                <div class="blog" style="width:512px;height:748px;"></div>
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:512px;height:408px;"></div>
            </div>
            <div class="page"  id="page5">
                <div class="blog" style="width:512px;height:748px;"></div>
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:512px;height:408px;"></div>
            </div>
            <div class="page"  id="page6">
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:512px;height:340px;"></div>
                <div class="blog" style="width:1024px;height:408px;"></div>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.xml2json.js"></script>
    <script type="text/javascript" src="jquery.event.swipe.js"></script>
    <script type="text/javascript" src="jquery.event.move.js"></script>
    <script type="text/javascript">
    $(function(){
        //init
        var colors = ['blue','green','yellow','black','red','purple']
        var $pages = $('.page');
        var current = 0;
        var count = $pages.length;

        $pages.each(function(index,item){
            $(this).css('background-color',colors[index]);
            $(this).find('.blog').css('background-color',colors[(index+1)%5]);
        });

        $pages.first().show(0);


        //event listen

        $('#cover').on('swipeup',function(){
            $(this).slideUp(200);
        });

        $('#content').on('swipedown', function(e) {
            $('#cover').slideDown(200);
        })

        $('#content').on('swipeleft', function(e) {
            var width = $(this).width();
            $($pages[current]).animate({
                left: '-='+width
            }, 500,function(){$(this).hide()});
            current<count-1?current++:current=0;            
            $($pages[current]).css('left',width).show().animate({
                left:'0'
            }, 500);
        })

        $('#content').on('swiperight', function(e) {
            var width = $(this).width();
            $($pages[current]).animate({
                left: '+='+width
            }, 500,function(){$(this).hide()});
            current>0?current--:current=count-1;            
            $($pages[current]).css('left',0-width).show().animate({
                left:'0'
            }, 500);
        });


        $().click(function(){
            var width = $(this).width();
            $($pages[current]).animate({
                left: '-='+width
            }, 500,function(){$(this).hide()});
            current<count-1?current++:current=0;            
            $($pages[current]).css('left',width).show().animate({
                left:'0'
            }, 500);
        });

        $('.blog').delegate('h2','click',function(event){
            $blog = $(this).parent();
            if($blog.hasClass('fullscreen')){
                $blog.removeClass('fullscreen');
                $blog.animate($blog.data('size'),200);
            }
            else{
                $blog.addClass('fullscreen');
                $blog.data('size',{width:$blog.width(),height:$blog.height()});
                var width = $('body').width();
                var height = $('body').height();
                $blog.animate({width:width-10,height:height-10},200);
            }
            event.stopPropagation();
        })

        //load data
        $.get('rss.xml', function(xml) {
            var jsonObj = $.xml2json(xml);
            var blogData = jsonObj.channel.item;

            // console.log(blogData[0]['content:encoded']);
            $('.blog').each(function(index,item){
                var blogItem = blogData[index%blogData.length];
                var content = blogItem.encoded?blogItem.encoded:blogItem['content:encoded'];
                var htmlStr = "<h2>" + blogItem.title + "</h2>" + content;
                $(this).html(htmlStr);
            })
        }); 
    })
    </script>
</html>